clear all;
close all;

clc;

[file,path] = uigetfile();

file
filepath = [path file ];
data = csvread(filepath);

% parse out
t = data(:,1);
dt = data(:,2);
desVal = data(:,3);
actualVal = data(:,4);
filtVal = data(:,5);
errorVal = data(:,6);
stickCmd = data(:,7);

filtTimeConstant = data(:,5);
kp = data(:,6);
stickLimit = data(:,7);


%     % write csv file
%  1           fprintf(pFile,'%6.6f,',t);
%  2           fprintf(pFile,'%d,',currentBehavior);
%  3           fprintf(pFile,'%6.6f,',ayprCmdMsg.AltDesiredMeters);   
%  4           fprintf(pFile,'%6.6f,',ayprCmdMsg.YawDesiredDeg);
%  5           fprintf(pFile,'%6.6f,',ayprCmdMsg.PitchDesiredDeg);  
%  6           fprintf(pFile,'%6.6f,',ayprCmdMsg.RollDesiredDeg);  
%  7           fprintf(pFile,'%6.6f,',ayprCmdMsg.AltSwitch);  
%  8           fprintf(pFile,'%6.6f,',ayprCmdMsg.YawSwitch);  
%  9           fprintf(pFile,'%6.6f,',ayprCmdMsg.PitchSwitch);  
%  10           fprintf(pFile,'%6.6f,',ayprCmdMsg.RollSwitch);   
%             
%   11          fprintf(pFile,'%6.6f,',stateEstimateMsg.Range);  
%             fprintf(pFile,'%6.6f,',stateEstimateMsg.Time); 
%             fprintf(pFile,'%6.6f,',stateEstimateMsg.North); 
%             fprintf(pFile,'%6.6f,',stateEstimateMsg.East); 
%             fprintf(pFile,'%6.6f,',stateEstimateMsg.Up); 
%             fprintf(pFile,'%6.6f,',stateEstimateMsg.Yaw); 
%             fprintf(pFile,'%6.6f,',stateEstimateMsg.Pitch);
%             fprintf(pFile,'%6.6f,\n',stateEstimateMsg.Roll);  

figure(1);
subplot(2,1,1)
plot(t,desVal,'r-','linewidth',2);
hold on;
plot(t,actualVal,'b-','linewidth',2);
plot(t,filtVal,'k-','linewidth',2);
grid on;
xlabel('Time (sec');
ylabel('Yaw (deg)');
legend('Desired','Actual','Fitlered')
set(gca,'FontSize',16);

figure(2);
subplot(2,1,1)
plot(t,stickCmd,'r-','linewidth',2);
hold on;
plot(t,ones(size(t))*stickLimit(1),'k--','linewidth',2);
plot(t,-ones(size(t))*stickLimit(1),'k--','linewidth',2);
hold on;
xlabel('Time (sec');
ylabel('Stick Command)');
set(gca,'FontSize',16);

subplot(2,1,2)
plot(t,errorVal,'k-','linewidth',2);
hold on
grid on;
xlabel('Time (sec');
ylabel('Yaw Error (deg)');
set(gca,'FontSize',16);